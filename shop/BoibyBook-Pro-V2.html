<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Buy BoibyBook Pro</title>
  <style>
    :root {
      --blue: #0071e3;
      --border: #d2d2d7;
      --text: #1d1d1f;
      --muted: #6e6e73;
      --bg: #fff;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      transition: opacity 0.3s ease;
    }

    body.fade-out {
      opacity: 0.5;
    }

    header {
      text-align: center;
      padding: 28px 16px;
      border-bottom: 1px solid var(--border);
      transition: all 0.3s ease;
    }
    
    h1 {
      font-size: 2rem;
      font-weight: 600;
      margin: 0;
    }

    .tabs {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin: 20px 0;
      transition: opacity 0.3s ease;
    }
    
    .tab {
      padding: 10px 22px;
      border: 1px solid var(--border);
      border-radius: 999px;
      cursor: pointer;
      transition: all .15s;
    }
    
    .tab.active {
      background: var(--blue);
      color: #fff;
      border-color: var(--blue);
    }

    .models, .configurator, .confirmation {
      max-width: 1200px;
      margin: auto;
      padding: 20px;
    }
    
    .models {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 25px;
    }
    
    .card {
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
      background: #fff;
      transition: box-shadow .15s, transform .06s;
      display: flex;
      flex-direction: column;
    }
    
    .card:hover {
      border-color: var(--blue);
      transform: translateY(-2px);
    }
    
    .card-content {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .card-image {
      width: 140px;
      height: 140px;
      border-radius: 0px;
      overflow: hidden;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .card-image img {
      max-width: 100%;
      max-height: 100%;
      transition: opacity 0.3s ease;
    }
    
    .card-details {
      flex: 1;
    }
    
    .card h2 {
      font-size: 1.3rem;
      margin: 0 0 6px;
      font-weight: 600;
    }
    
    .price {
      font-size: 1.05rem;
      font-weight: 500;
      margin: 6px 0 12px;
      color: var(--muted);
    }
    
    .card ul {
      margin: 0;
      padding-left: 20px;
      color: var(--muted);
      font-size: 0.9rem;
    }
    
    .color-selector {
      display: flex;
      gap: 10px;
      margin: 10px 0;
    }
    
    .color-pill {
      padding: 6px 12px;
      border: 1px solid var(--border);
      border-radius: 999px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s;
    }
    
    .color-pill.selected {
      background: var(--blue);
      color: #fff;
      border-color: var(--blue);
    }
    
    .select-btn {
      margin-top: auto;
      padding: 10px 0;
      background: var(--blue);
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: background .2s;
    }
    
    .select-btn:hover {
      background: #005bB6;
    }

    .back-btn {
      margin: 10px 0 20px;
      padding: 8px 18px;
      background: #f5f5f7;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      font-size: 0.95rem;
    }
    
    .back-btn:hover { 
      background: #e6e6e9; 
    }

    .hero { 
      margin-bottom: 24px; 
    }
    
    .hero-title {
      font-size: clamp(1.8rem, 4vw, 2.4rem);
      font-weight: 700;
      letter-spacing: -0.02em;
      line-height: 1.2;
      margin: 0 0 12px;
    }
    
    .hero-content {
      display: flex;
      gap: 30px;
      align-items: flex-start;
    }
    
    .hero-image {
      width: 280px;
      flex-shrink: 0;
      border-radius: 0px;
      overflow: hidden;
      background: #fff;
    }
    
    .hero-image img {
      width: 100%;
      display: block;
      transition: opacity 0.3s ease;
    }
    
    .hero-list {
      list-style: none;
      padding: 0;
      margin: 0;
      color: var(--muted);
      flex: 1;
    }
    
    .hero-list li {
      font-size: 1rem;
      line-height: 1.6;
      margin: 6px 0;
    }

    .group { 
      margin: 24px 0; 
      position: relative;
    }
    
    .group h3 {
      font-size: 1.1rem;
      margin: 0 0 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .info-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--muted);
      color: white;
      font-size: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .info-icon:hover {
      background: var(--blue);
    }

    .chip-info-link {
      text-align: center;
      margin: 30px 0 20px;
    }
    
    .chip-info-link a {
      color: var(--blue);
      text-decoration: none;
      font-weight: 500;
      cursor: pointer;
    }
    
    .chip-info-link a:hover {
      text-decoration: underline;
    }

    .pill {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 28px 20px;
      border: 1px solid var(--border);
      border-radius: 12px;
      margin: 10px 0;
      cursor: pointer;
      background: #fff;
      transition: border-color .12s, box-shadow .12s, transform .06s;
    }
    
    .pill:hover { 
      border-color: var(--blue); 
      transform: translateY(-2px); 
    }
    
    .pill.selected {
      border: 2px solid var(--blue);
      box-shadow: 0 4px 14px rgba(0,113,227,0.08);
    }
    
    .pill.disabled {
      opacity: .6;
      cursor: not-allowed;
      background: #fbfbfb;
    }
    
    .pill .label { 
      font-weight: 600; 
    }
    
    .pill .price-right { 
      color: var(--muted); 
      font-weight: 600; 
      white-space: nowrap; 
    }

    .note {
      font-size: .9rem;
      color: var(--muted);
      margin-top: 6px;
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal-overlay.visible {
      opacity: 1;
      visibility: visible;
    }
    
    .modal {
      background: white;
      border-radius: 16px;
      padding: 24px;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      transform: translateY(20px);
      transition: transform 0.3s ease;
    }
    
    .modal-overlay.visible .modal {
      transform: translateY(0);
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    
    .modal-title {
      font-size: 1.4rem;
      font-weight: 600;
      margin: 0;
    }
    
    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--muted);
    }
    
    .modal-content {
      line-height: 1.6;
    }
    
    .modal-content p {
      margin: 0 0 16px;
    }
    
    .modal-content ul {
      margin: 0 0 16px;
      padding-left: 20px;
    }

    .chip-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin: 20px 0;
    }
    
    .chip-card {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
    }
    
    .chip-card h4 {
      margin: 0 0 10px;
      font-size: 1.1rem;
      color: var(--blue);
    }
    
    .chip-card ul {
      text-align: left;
      margin: 0;
      padding-left: 20px;
      font-size: 0.9rem;
    }
    
    .chip-specs {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid var(--border);
      font-size: 0.9rem;
    }

    .checkout {
      position: sticky;
      bottom: 0;
      left: 0;
      right: 0;
      width: auto;
      max-width: 100vw;
      box-sizing: border-box;
      background: #fff;
      border-top: 1px solid var(--border);
      padding: 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 12px;
      z-index: 100;
      overflow-x: hidden;
      padding-left: max(18px, env(safe-area-inset-left));
      padding-right: max(18px, env(safe-area-inset-right));
    }
    
    .total {
      font-size: 1.4rem;
      font-weight: 700;
    }
    
    .add-to-bag {
      padding: 12px 22px;
      font-size: 1.05rem;
      background: var(--blue);
      color: #fff;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      transition: background .2s;
    }
    
    .add-to-bag:hover { 
      background: #005bB6; 
    }

    .confirmation {
      text-align: center;
      display: none;
    }
    
    .confirmation-image {
      width: 300px;
      margin: 0 auto 20px;
      border-radius: 0px;
      overflow: hidden;
    }
    
    .confirmation-image img {
      width: 100%;
    }
    
    .confirmation-details {
      max-width: 600px;
      margin: 0 auto;
      text-align: left;
      background: #f9f9f9;
      padding: 20px;
      border-radius: 12px;
    }
    
    .confirmation-title {
      font-size: 2.2rem;
      margin-bottom: 10px;
      color: #0071e3;
    }
    
    .confirmation-model {
      font-size: 1.4rem;
      margin-bottom: 20px;
    }
    
    .confirmation-list {
      list-style: none;
      padding: 0;
      margin: 0 0 20px;
    }
    
    .confirmation-list li {
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    
    .confirmation-total {
      font-size: 1.6rem;
      font-weight: 700;
      text-align: center;
      margin-top: 20px;
    }

    @media (max-width: 900px) {
      .models {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      }
      
      .hero-content {
        flex-direction: column;
      }
      
      .hero-image {
        width: 100%;
        max-width: 300px;
        margin: 0 auto;
      }
      
      .chip-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 600px) {
      .pill { 
        padding: 14px; 
      }
      
      .checkout {
        flex-direction: column;
        align-items: stretch;
        text-align: center;
      }
      
      .add-to-bag { 
        width: 100%; 
      }
      
      .card-content {
        flex-direction: column;
      }
      
      .card-image {
        width: 100%;
        height: 180px;
        margin-bottom: 15px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1 id="headerTitle">Buy BoibyBook Pro</h1>
  </header>

  <div class="tabs" id="sizeTabs">
    <div class="tab active" data-size="14">14-inch</div>
    <div class="tab" data-size="16">16-inch</div>
  </div>

  <main>
    <div class="models" id="models"><!-- cards inserted by JS --></div>

    <div class="chip-info-link">
      <a id="chipInfoLink">What chip do I need? →</a>
    </div>

    <div class="configurator" id="configurator" style="display:none;">
      <button class="back-btn" id="backBtn">← Back</button>
      <div class="hero">
        <h2 class="hero-title" id="heroTitle"></h2>
        <div class="hero-content">
          <div class="hero-image" id="heroImage"></div>
          <ul class="hero-list" id="heroList"></ul>
        </div>
      </div>
      <div id="options"></div>
    </div>

    <div class="confirmation" id="confirmation">
      <h2 class="confirmation-title">Order Confirmed</h2>
      <div class="confirmation-image" id="confirmationImage"></div>
      <h3 class="confirmation-model" id="confirmationModel"></h3>
      <div class="confirmation-details">
        <h4>Order Summary:</h4>
        <ul class="confirmation-list" id="confirmationList"></ul>
        <div class="confirmation-total" id="confirmationTotal"></div>
      </div>
      <button class="back-btn" id="confirmationBackBtn" style="margin-top: 30px;">Back to Store</button>
    </div>
  </main>

  <section class="learn-more" style="max-width: 1200px; margin: 60px auto; padding: 0 20px;">
  <h2 style="font-size: 2.2rem; font-weight: 700; text-align: center; margin-bottom: 40px; opacity: 0; transform: translateY(20px);">Learn more about BoibyBook Pro</h2>
  
  <!-- Display Information -->
  <div class="info-section" style="margin-bottom: 50px; opacity: 0; transform: translateY(20px);">
    <h3 style="font-size: 1.8rem; font-weight: 600; margin-bottom: 20px; color: var(--blue);">Revolutionary Display Technology</h3>
    <div style="display: flex; gap: 30px; align-items: center;">
      <div style="flex: 1;">
        <p style="line-height: 1.6; margin-bottom: 16px;">The BoibyBook Pro features cutting-edge Tandem OLED technology that delivers unparalleled image quality with perfect blacks, incredible contrast ratios, and vibrant colors.</p>
        <ul style="line-height: 1.6; padding-left: 20px;">
          <li><strong>14-inch model:</strong> 3456×2224 resolution, 120Hz ProMotion with VRR, 1400 nits peak brightness</li>
          <li><strong>16-inch model:</strong> 3840×2464 resolution, 240Hz ProMotion with VRR, 1600 nits peak brightness</li>
          <li>Wide P3 color gamut with 1 billion colors</li>
          <li>True Tone technology for ambient color adjustment</li>
          <li>Optional nano-texture glass for reduced glare in bright environments</li>
        </ul>
      </div>
      <div style="flex: 1; background: #f5f5f7; padding: 20px; border-radius: 12px; transition: transform 0.3s ease;">
        <h4 style="margin-top: 0; color: var(--muted);">What is Tandem OLED?</h4>
        <p style="line-height: 1.6;">Tandem OLED uses two OLED layers instead of one, doubling the brightness while maintaining the same power consumption. This results in higher peak brightness, better HDR performance, and reduced risk of burn-in compared to traditional OLED displays.</p>
      </div>
    </div>
  </div>
  
  <!-- GPU Performance Section -->
  <div class="info-section" style="margin-bottom: 50px; opacity: 0; transform: translateY(20px);">
    <h3 style="font-size: 1.8rem; font-weight: 600; margin-bottom: 20px; color: var(--blue);">GPU Performance</h3>
    <div style="background: linear-gradient(135deg, #f0f7ff 0%, #e6f0ff 100%); padding: 30px; border-radius: 16px; border-left: 4px solid var(--blue);">
      <p style="font-size: 1.2rem; line-height: 1.6; margin-bottom: 20px;">
        Run graphics-intensive workflows with a responsiveness that keeps up with your imagination. The B6 family of chips features a GPU with a second-generation hardware-accelerated ray tracing engine that renders images faster, so gaming feels more immersive and realistic than ever.
      </p>
      <p style="line-height: 1.6;">
        Dynamic Caching optimizes fast on-chip memory to dramatically increase average GPU utilisation, driving a huge performance boost for the most demanding pro apps and games.
      </p>
    </div>
  </div>
  
  <!-- Chips Information -->
  <div class="info-section" style="margin-bottom: 50px; opacity: 0; transform: translateY(20px);">
    <h3 style="font-size: 1.8rem; font-weight: 600; margin-bottom: 20px; color: var(--blue);">Boiby Silicon: Revolutionary Performance</h3>
    <p style="line-height: 1.6; margin-bottom: 20px;">Boiby's custom silicon chips deliver incredible performance and efficiency, specifically optimized for the BoibyBook Pro hardware and BoibyOS Tuxedo.</p>
    
    <div class="chip-comparison" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 30px;">
      <!-- B6 Chip -->
      <div class="chip-card" style="border: 1px solid var(--border); border-radius: 12px; padding: 20px; transition: all 0.3s ease; position: relative; overflow: hidden;">
        <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #0071e3, #00a2ff);"></div>
        <div style="text-align: center; margin-bottom: 20px;">
          <img src="B6.png" alt="B6 Chip" style="width: 200px; height: 200px; object-fit: contain; transition: transform 0.3s ease;">
        </div>
        <h4 style="margin-top: 0; color: var(--blue); text-align: center;">Boiby B6</h4>
        <p style="text-align: center; font-style: italic; margin-bottom: 15px;">B6 brings serious speed to the 14-inch BoibyBook Pro, which comes standard with 16 GB of unified memory. With the B6 chip, you can multitask seamlessly across everyday apps, and power through memory-intensive tasks, such as editing high-resolution video.</p>
        <ul style="padding-left: 20px; margin-bottom: 20px;">
          <li>Up to 10-core CPU (6 performance, 4 efficiency)</li>
          <li>Up to 12-core GPU</li>
          <li>16-core Neural Engine</li>
          <li>Supports up to 32 GB unified memory</li>
          <li>Media engine with BoibyRes encode/decode</li>
        </ul>
        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border);">
          <p style="margin: 5px 0;"><strong>Best for:</strong> Students, professionals, content creators</p>
        </div>
        <button class="performance-btn" style="margin-top: 15px; padding: 8px 16px; background: var(--blue); color: white; border: none; border-radius: 6px; cursor: pointer; width: 100%; transition: background 0.2s;">View Performance</button>
      </div>
      
      <!-- B6 Pro Chip -->
      <div class="chip-card" style="border: 1px solid var(--border); border-radius: 12px; padding: 20px; transition: all 0.3s ease; position: relative; overflow: hidden;">
        <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #ff9500, #ffaa33);"></div>
        <div style="text-align: center; margin-bottom: 20px;">
          <img src="B6Pro.png" alt="B6 Pro Chip" style="width: 200px; height: 200px; object-fit: contain; transition: transform 0.3s ease;">
        </div>
        <h4 style="margin-top: 0; color: #ff9500; text-align: center;">Boiby B6 Pro</h4>
        <p style="text-align: center; font-style: italic; margin-bottom: 15px;">For those who need more power, like researchers, engineers, developers and creative pros, B6 Pro speeds up everything from database design and data modelling to DNA sequencing. Whether you choose the 14- or 16-inch model, BoibyBook Pro with B6 Pro delivers immense graphics performance, so 3D rendering and animation are so much faster.</p>
        <ul style="padding-left: 20px; margin-bottom: 20px;">
          <li>Up to 14-core CPU (10 performance, 4 efficiency)</li>
          <li>Up to 24-core GPU</li>
          <li>24-core Neural Engine</li>
          <li>Supports up to 48 GB unified memory</li>
          <li>Enhanced media engine with BoibyRes encode/decode</li>
        </ul>
        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border);">
          <p style="margin: 5px 0;"><strong>Best for:</strong> Developers, video professionals, 3D artists</p>
        </div>
        <button class="performance-btn" style="margin-top: 15px; padding: 8px 16px; background: #ff9500; color: white; border: none; border-radius: 6px; cursor: pointer; width: 100%; transition: background 0.2s;">View Performance</button>
      </div>
      
      <!-- B6 Max Chip -->
      <div class="chip-card" style="border: 1px solid var(--border); border-radius: 12px; padding: 20px; transition: all 0.3s ease; position: relative; overflow: hidden;">
        <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #ff2d55, #ff6382);"></div>
        <div style="text-align: center; margin-bottom: 20px;">
          <img src="B6Max.png" alt="B6 Max Chip" style="width: 200px; height: 200px; object-fit: contain; transition: transform 0.3s ease;">
        </div>
        <h4 style="margin-top: 0; color: #ff2d55; text-align: center;">Boiby B6 Max</h4>
        <p style="text-align: center; font-style: italic; margin-bottom: 15px;">B6 Max, available on the 14- and 16-inch BoibyBook Pro, is the world's most powerful chip in a pro laptop and redefines what a laptop can do. It will handle projects previously reserved for the most capable desktops, such as interacting with large language models with hundreds of billions of parameters. And you can tear through intensive creative workloads, like detailed visual effects, 3D animation and film scoring. It can be configured with up to 128 GB of unified memory.</p>
        <ul style="padding-left: 20px; margin-bottom: 20px;">
          <li>Up to 18-core CPU (14 performance, 4 efficiency)</li>
          <li>Up to 48-core GPU</li>
          <li>24-core Neural Engine</li>
          <li>Supports up to 128 GB unified memory</li>
          <li>Media engine with dual BoibyRes encode/decode</li>
        </ul>
        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border);">
          <p style="margin: 5px 0;"><strong>Best for:</strong> AI researchers, 8K video editors, scientific computing</p>
        </div>
        <button class="performance-btn" style="margin-top: 15px; padding: 8px 16px; background: #ff2d55; color: white; border: none; border-radius: 6px; cursor: pointer; width: 100%; transition: background 0.2s;">View Performance</button>
      </div>
    </div>
  </div>
    
  <!-- Ports Information -->
  <div class="info-section" style="margin-bottom: 50px; opacity: 0; transform: translateY(20px);">
    <h3 style="font-size: 1.8rem; font-weight: 600; margin-bottom: 20px; color: var(--blue);">Connectivity & Ports</h3>
    
    <div style="display: flex; gap: 30px;">
      <div style="flex: 1;">
        <h4 style="margin-top: 0;">Standard on all models:</h4>
        <ul style="line-height: 1.6;">
          <li><strong>Three Thunderbolt 4/5 ports:</strong> Charge, transfer data at up to 40/80Gbps, and connect to high-resolution displays</li>
          <li><strong>HDMI 2.1/2.2:</strong> Connect to 4K/8K displays, TVs, and projectors</li>
          <li><strong>SD Express card reader:</strong> Import photos and videos at high speeds from cameras</li>
          <li><strong>USB 3.1 Type-A port:</strong> Connect legacy devices and accessories</li>
          <li><strong>3.5mm headphone jack:</strong> High-impedance audio support for professional headphones</li>
          <li><strong>BoibySafe 2 charging:</strong> Magnetic power connection with quick release</li>
        </ul>
      </div>
      <div style="flex: 1; background: #f5f5f7; padding: 20px; border-radius: 12px; transition: transform 0.3s ease;">
        <h4 style="margin-top: 0;">Display Support</h4>
        <p style="line-height: 1.6;">BoibyBook Pro supports multiple external displays:</p>
        <ul style="line-height: 1.6;">
          <li><strong>B6 chip:</strong> Up to two 5K or three 4K displays</li>
          <li><strong>B6 Pro chip:</strong> Up to three 8K or four 6K displays</li>
          <li><strong>B6 Max chip:</strong> Up to four 8K displays</li>
        </ul>
        <p style="line-height: 1.6; margin-top: 15px;">All models support native resolution and refresh rate on Boiby Pro Display XDR and other high-end monitors.</p>
      </div>
    </div>
  </div>

  <!-- BoibyOS Tuxedo -->
  <div class="info-section" style="opacity: 0; transform: translateY(20px);">
    <h3 style="font-size: 1.8rem; font-weight: 600; margin-bottom: 20px; color: var(--blue);">BoibyOS Tuxedo</h3>
    
    <div style="display: flex; gap: 30px; margin-bottom: 30px;">
      <div style="flex: 1;">
        <p style="line-height: 1.6;">boibyOS Tuxedo is our most powerful operating system yet. boibyOS is designed to leverage the full potential of Boiby silicon, with a modern foundation combined with elegance and ease of use, while giving users full control - and it's fully open source.</p>
        
        <h4 style="margin-top: 20px;">Key Features:</h4>
        <ul style="line-height: 1.6;">
          <li><strong>Boiby Desktop Environment:</strong> Intuitive, customizable interface with powerful window management</li>
          <li><strong>Universal Compatibility:</strong> Run Linux applications natively and Windows software through compatibility layers</li>
          <li><strong>Security First:</strong> Best security of any consumer operating system.</li>
          <li><strong>Powerful Command Line:</strong> Full bash/zsh support with Boiby Developer Tools pre-installed</li>
          <li><strong>Gaming Ready:</strong> Vulkan and BoibyGL support with optimized drivers for gaming and creative applications</li>
        </ul>
      </div>
      <div style="flex: 1; transition: transform 0.3s ease;">
        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjVmNWY1IiAvPgogIDx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0ibW9ub3NwYWNlIiBmb250LXNpemU9IjE4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiBmaWxsPSIjNmU2ZTczIj5Cb2lieE9TIFR1eGVkbyBTY3JlZW5zaG90PC90ZXh0Pgo8L3N2Zz4=" alt="BoibyOS Tuxedo interface" style="width: 100%; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
      </div>
    </div>
    
    <div style="background: #f0f7ff; padding: 20px; border-radius: 12px; border-left: 4px solid var(--blue); transition: transform 0.3s ease;">
      <h4 style="margin-top: 0; color: var(--blue);">Included Software Suite</h4>
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
        <div>
          <p style="margin: 5px 0;"><strong>• Boiby Office:</strong> Complete productivity suite</p>
          <p style="margin: 5px 0;"><strong>• Boiby Photos:</strong> Professional photo management</p>
          <p style="margin: 5px 0;"><strong>• Boiby Code Studio:</strong> Advanced development environment</p>
        </div>
        <div>
          <p style="margin: 5px 0;"><strong>• Boiby Composer Pro:</strong> Video editing software</p>
          <p style="margin: 5px 0;"><strong>• Sound Studio:</strong> Audio production toolkit</p>
        </div>
      </div>
    </div>
  </div>
    <!-- Performance Comparison Modals -->
  <div id="performanceModal" class="modal-overlay" style="display: none;">
    <div class="modal" style="max-width: 800px;">
      <div class="modal-header">
        <h3 class="modal-title" id="modalTitle">Performance Comparison</h3>
        <button class="modal-close" onclick="closePerformanceModal()">×</button>
      </div>
      <div class="modal-content">
        <div class="tabs" style="margin-bottom: 20px;">
          <div class="tab active" data-tab="cpu">CPU Performance</div>
          <div class="tab" data-tab="compile">Code Compiling</div>
          <div class="tab" data-tab="gaming">Gaming</div>
          <div class="tab" data-tab="video">Video Editing</div>
        </div>
        <div id="performanceContent">
          <!-- Content will be dynamically inserted -->
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Performance data with multipliers
  const performanceData = {
    'Boiby B6': {
      cpu: {
        labels: ['13-inch BoibyBook Pro with AMD Ryzen 5 4500U (Baseline)', '13-inch BoibyBook Pro with B1', '14-inch BoibyBook Pro with B6'],
        values: [100, 340, 450],
        multipliers: ['1.0x', '3.4x', '4.5x']
      },
      compile: {
        labels: ['13-inch BoibyBook Pro with AMD Ryzen 5 4500U (Baseline)', ' 13-inch BoibyBook Pro with B1', '14-inch BoibyBook Pro with B6'],
        values: [100, 360, 520],
        multipliers: ['1.0x', '3.6x', '5.2x']
      },
      gaming: {
        labels: ['13-inch BoibyBook Pro with AMD Ryzen 5 4500U (Baseline)', ' 13-inch BoibyBook Pro with B1', '14-inch BoibyBook Pro with B6'],
        values: [100, 270, 420],
        multipliers: ['1.0x', '2.7x', '4.2x']
      },
      video: {
        labels: ['13-inch BoibyBook Pro with AMD Ryzen 5 4500U (Baseline)', ' 13-inch BoibyBook Pro with B1', '14-inch BoibyBook Pro with B6'],
        values: [100, 490, 740],
        multipliers: ['1.0x', '4.9x', '7.4x']
      }
    },
    'Boiby B6 Pro': {
      cpu: {
        labels: ['13-inch BoibyBook Pro with AMD Ryzen 5 4500U (Baseline)', '14- or 16-inch BoibyBook Pro with B1 Pro', '14- or 16-inch BoibyBook Pro with B6 Pro'],
        values: [100, 410, 630],
        multipliers: ['1.0x', '4.1x', '6.3x']
      },
      compile: {
        labels: ['13-inch BoibyBook Pro with AMD Ryzen 5 4500U (Baseline)', '14- or 16-inch BoibyBook Pro with B1 Pro', '14- or 16-inch BoibyBook Pro with B6 Pro'],
        values: [100, 510, 780],
        multipliers: ['1.0x', '5.1x',  '7.8x']
      },
      gaming: {
        labels: ['13-inch BoibyBook Pro with AMD Ryzen 5 4500U (Baseline)', '14- or 16-inch BoibyBook Pro with B1 Pro', '14- or 16-inch BoibyBook Pro with B6 Pro'],
        values: [100, 570, 820],
        multipliers: ['1.0x', '5.7x', '8.2x']
      },
      video: {
        labels: ['13-inch BoibyBook Pro with AMD Ryzen 5 4500U (Baseline)', '14- or 16-inch BoibyBook Pro with B1 Pro', '14- or 16-inch BoibyBook Pro with B6 Pro'],
        values: [100, 1120, 1540],
        multipliers: ['1.0x', '11.2x', '15.4x']
      }
    },
    'Boiby B6 Max': {
      cpu: {
        labels: ['16-inch BoibyBook Pro with AMD Ryzen 9 4900H (Baseline)', '14- or 16-inch BoibyBook Pro with B1 Max', '14- or 16-inch BoibyBook Pro with B6 Max'],
        values: [100, 270, 360],
        multipliers: ['1.0x', '2.7x', '3.6x']
      },
      compile: {
        labels: ['16-inch BoibyBook Pro with AMD Ryzen 9 4900H (Baseline)', '14- or 16-inch BoibyBook Pro with B1 Max', '14- or 16-inch BoibyBook Pro with B6 Max'],
        values: [100, 330, 450],
        multipliers: ['1.0x', '3.3x', '4.5x']
      },
      gaming: {
        labels: ['16-inch BoibyBook Pro with AMD Ryzen 9 4900H (Baseline)', '14- or 16-inch BoibyBook Pro with B1 Max', '14- or 16-inch BoibyBook Pro with B6 Max'],
        values: [100, 350, 480],
        multipliers: ['1.0x', '3.5x', '4.8x']
      },
      video: {
        labels: ['16-inch BoibyBook Pro with AMD Ryzen 9 4900H (Baseline)', '14- or 16-inch BoibyBook Pro with B1 Max', '14- or 16-inch BoibyBook Pro with B6 Max'],
        values: [100, 590, 940],
        multipliers: ['1.0x', '5.9x', '9.4x']
      }
    }
  };
  
  function updatePerformanceContent(tabName) {
    const chipType = document.getElementById('modalTitle').textContent.replace(' Performance', '');
    const data = performanceData[chipType][tabName];
    const contentDiv = document.getElementById('performanceContent');
    
    let html = `<div style="margin-top: 20px;">
      <h4 style="margin-bottom: 15px;">${getTabTitle(tabName)} Performance</h4>
      <div style="padding: 20px; background: #f9f9f9; border-radius: 8px;">`;
    
    const maxValue = Math.max(...data.values);
    
    data.values.forEach((value, index) => {
      const width = (value / maxValue) * 100;
      const isBaseline = data.labels[index].includes('(Baseline)') || data.labels[index].includes('AMD Ryzen') || data.labels[index].includes('B1');
      const barColor = isBaseline ? '#888' : 'var(--blue)';
      
      html += `
        <div style="margin-bottom: 25px;">
          <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
            <div style="font-weight: ${isBaseline ? '400' : '600'}; color: ${isBaseline ? '#666' : 'var(--text)'};">${data.labels[index]}</div>
            <div style="font-weight: 600; color: ${isBaseline ? '#666' : 'var(--blue)'};">${data.multipliers[index]}</div>
          </div>
          <div style="width: 100%; height: 24px; background: #e0e0e0; border-radius: 12px; overflow: hidden; position: relative;">
            <div style="width: ${width}%; height: 100%; background: ${barColor}; border-radius: 12px; transition: width 1s ease;"></div>
          </div>
        </div>
      `;
    });
    
    html += `</div></div>`;
    contentDiv.innerHTML = html;
  }
</script>

<!-- Add these CSS styles for the horizontal bars -->
<style>
  /* Animation for horizontal bars */
  #performanceContent div[style*="background: var(--blue);"] {
    animation: growBar 1s ease-out forwards;
    transform-origin: left center;
  }
  
  #performanceContent div[style*="background: #888;"] {
    animation: growBar 1s ease-out forwards;
    transform-origin: left center;
  }
  
  @keyframes growBar {
    from { transform: scaleX(0); }
    to { transform: scaleX(1); }
  }
</style>
<style>
  .learn-more .chip-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 24px rgba(0,0,0,0.1);
  }
  
  .learn-more .chip-card img:hover {
    transform: scale(1.05);
  }
  
  .performance-btn:hover {
    opacity: 0.9;
  }
  
  @media (max-width: 900px) {
    .learn-more .chip-comparison {
      grid-template-columns: 1fr;
    }
    
    .learn-more .info-section > div {
      flex-direction: column;
    }
  }
</style>

  <!-- Memory Modal -->
  <div class="modal-overlay" id="memoryModal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="memoryModalTitle">Memory Guide</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-content" id="memoryModalContent">
        <!-- Content will be dynamically inserted based on model -->
      </div>
    </div>
  </div>

  <!-- Chip Info Modal -->
  <div class="modal-overlay" id="chipModal">
    <div class="modal" style="max-width:700px">
      <div class="modal-header">
        <h3 class="modal-title">Which Chip is Right for You?</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-content">
        <p>Our chips are designed for different types of users and workloads. Here's a guide to help you choose:</p>
        
        <div class="chip-grid">
          <div class="chip-card">
            <h4>Boiby B6 Pro</h4>
            <ul>
               <li>For those who need more performance, the M4 Pro chip speeds up everything from database design to code compilation. Its GPU is up to twice as powerful as that of B6, perfect for games and pro apps that utilize high-performance graphics.</li>
              <li>Run multiple professional apps at once, manipulate gigapixel panoramas, compile millions of lines of code</li>
              <li>Edit multiple streams of 4K video and edit 8K video</li>
            </ul>
            <div class="chip-specs">
              <p><strong>Up to:</strong><br>
              14-core CPU<br>
              24-core GPU<br>
              64 GB unified memory</p>
              <p>Up to three 8K or four 6K external displays</p>
            </div>
          </div>
          
          <div class="chip-card">
            <h4>Boiby B6 Max</h4>
            <ul>
              <li>B6 Max powers the most extreme workflows with even more CPU cores, up to double the GPU cores, enormous unified memory amounts, an advanced Media Engine, and the same powerful Neural Engine.</li>
              <li>Render intricate 3D content, develop transformer models with billions of parameters</li>
              <li>Tackle post-production of 12K video</li>
              <li>Perfect for scientific computing, data science, and running LLMs on-device</li>
            </ul>
            <div class="chip-specs">
              <p><strong>Up to:</strong><br>
              18-core CPU<br>
              48-core GPU<br>
              128 GB unified memory</p>
              <p>Up to four 8K external displays</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="checkout" id="checkout">
    <div class="total" id="finalPrice">Total: A$0</div>
    <button class="add-to-bag" id="addToBagBtn">Add to Bag</button>
  </div>

  <script>
    (function () {
      const sizes = ['14','16'];
      const colors = ['Black', 'Silver'];
      let selectedColor = 'Black';

      // Updated template with combined B6 Pro/Max model
      const template14 = {
        "B6 Pro/Max": {
          price: 3299,
          display: "14.2-inch Tandem OLED 240Hz VRR 3456x2224 display (peak 1600 nits)",
          ports: [
            "Three Thunderbolt 5 ports",
            "One  USB 3.1 Type-A port",
            "HDMI 2.2 + DisplayPort 2.1b",
            "SD Express card reader",
            "Audio Jack"
          ],
          upgrades: {
            coating: ["No anti-reflective coating (base)", "Anti-reflective display coating (+A$100)"],
            chip: [
              // B6 Pro configurations
              "Boiby B6 Pro chip with 12-core CPU and 20-core GPU (base)", 
              "Boiby B6 Pro chip with 14-core CPU and 24-core GPU (+A$300)",
              // B6 Max configurations
              "Boiby B6 Max chip with 14-core CPU and 40-core GPU (+A$1200)",
              "Boiby B6 Max chip with 18-core CPU and 48-core GPU (+A$1800)"
            ],
            memory: [
              "32 GB unified memory (base)",
              "48 GB unified memory (+A$200)",
              "64 GB unified memory (+A$400)",
              "96 GB unified memory (+A$800)",
              "128 GB unified memory (+A$1200)"
            ],
            storage: [
              "1 TB SSD storage (base)", 
              "2 TB SSD storage (+A$100)", 
              "4 TB SSD storage (+A$300)", 
              "8 TB SSD storage (+A$700)"
            ],
            adapter: ["90 W USB-C Power Adapter (base)", "135W USB-C Power Adapter (+A$50)"]
          }
        }
      };

      const template16 = {
        "B6 Pro/Max": {
          price: 3999,
          display: "16.2-inch Tandem OLED 240Hz VRR 3840x2464 display (peak 1600 nits)",
          ports: [
            "Three Thunderbolt 5 ports",
            "One USB 3.1 Type-A port",
            "HDMI 2.2 + DisplayPort 2.1b",
            "SD Express card reader",
            "Audio Jack"
          ],
          upgrades: {
            coating: ["No anti-reflective coating (base)", "Anti-reflective display coating (+A$100)"],
            chip: [
              // B6 Pro configurations
              "Boiby B6 Pro chip with 14-core CPU and 24-core GPU (base)",
              // B6 Max configurations
              "Boiby B6 Max chip with 14-core CPU and 40-core GPU (+A$900)",
              "Boiby B6 Max chip with 18-core CPU and 48-core GPU (+A$1500)"
            ],
            memory: [
              "32 GB unified memory (base)",
              "48 GB unified memory (+A$200)",
              "64 GB unified memory (+A$400)",
              "96 GB unified memory (+A$800)",
              "128 GB unified memory (+A$1200)"
            ],
            storage: [
              "1 TB SSD storage (base)", 
              "2 TB SSD storage (+A$100)", 
              "4 TB SSD storage (+A$300)", 
              "8 TB SSD storage (+A$700)",
            ],
            adapter: ["135W USB-C Power Adapter (base)"]
          }
        }
      };

      const baseConfigs = { '14': {}, '16': {} };
      baseConfigs['14'] = JSON.parse(JSON.stringify(template14));
      baseConfigs['16'] = JSON.parse(JSON.stringify(template16));

      const addons = {
        mouse: ["Boiby Pro Mouse (+A$100)"],
        keyboard: ["Boiby Pro Keyboard (+A$200)", "Boiby Pro Keyboard with Number Pad (+A$250)"],
        monitor: ["Boiby HDR Display 27-inch IPS 1440p 120Hz (+A$499)", "Boiby Studio OLED Display 27-inch 5K 120Hz (+A$2199)"]
      };

      let selectedSize = '14';
      let selectedModel = null;
      let selectedOptions = {};

      const $ = q => document.querySelector(q);
      const $$ = q => Array.from(document.querySelectorAll(q));
      const cleanLabel = opt => (opt||'').split("(")[0].trim();
      const priceDelta = opt => {
        if (!opt) return 0;
        const m = opt.match(/\+A\$(\d+)/);
        return m ? parseInt(m[1],10) : 0;
      };
      const formatPrice = n => `A$${n.toLocaleString('en-AU')}`;

      // Updated memory guide for combined B6 Pro/Max model
      const memoryGuides = {
        'B6 Pro/Max': `
          <p><strong>How much memory is right for you?</strong></p>
          <p>Our unified memory architecture allows the CPU and GPU to access the same memory pool, improving performance and efficiency. Here is a general guide to how much you might need:</p>
          
          <p><strong>32 GB:</strong> Best for users engaging in more intensive workflows, such as video editing in 4K, music production with multiple tracks, large-scale coding projects, working with 3D models, playing memory-intensive simulator games, or using virtual machines.</p>
          
          <p><strong>48 GB or 64 GB:</strong> Best for professionals who have highly memory-intensive workflows. Ideal for multi-layer 4K video editing, multiple virtual machines, compiling very large projects, working with very complex 3D models and animations, running simulations, moderate machine learning workloads, or playing highly memory-intensive simulator games.</p>
          
          <p><strong>96 GB or 128 GB:</strong> For professionals in specialized fields like high-budget film editing, data science, engineering, or machine learning. Designed for workflows that involve enormous projects and require huge amounts of data to be kept in active memory. It is perfect for those working on high-resolution visual effects in cinema, simulation-based software, or advanced scientific computations. <strong>Note:</strong> 128GB requires B6 Max chip configuration.</p>
        `
      };

      function findGroupByName(name) {
        const groups = $$('#options .group');
        return groups.find(g => g.querySelector('h3') && g.querySelector('h3').innerText.toLowerCase() === name.toLowerCase());
      }

      function initTabs() {
        const tabs = $$('.tab[data-size]');
        if (!tabs.length) return;
        tabs.forEach(tab => {
          tab.addEventListener('click', () => {
            // Fade effect
            document.body.classList.add('fade-out');
            
            setTimeout(() => {
              tabs.forEach(t => t.classList.remove('active'));
              tab.classList.add('active');
              const size = tab.getAttribute('data-size');
              if (sizes.includes(size)) {
                selectedSize = size;
                // Update header
                $('#headerTitle').textContent = `Buy BoibyBook Pro ${size}-inch`;
                renderModels();
              }
              
              // Fade back in
              document.body.classList.remove('fade-out');
            }, 300);
          });
        });
      }

      function renderModels() {
        const container = $('#models');
        if (!container) return;
        container.innerHTML = '';
        const configs = baseConfigs[selectedSize];
        Object.keys(configs).forEach(model => {
          const cfg = configs[model];
          const card = document.createElement('div');
          card.className = 'card';
          card.setAttribute('data-model', model);
          
          // Create image element
          const imageUrl = `BoibyBookPro${selectedColor}.png`;
          
          card.innerHTML = `
            <div class="card-content">
              <div class="card-image">
                <img src="${imageUrl}" alt="${model} ${selectedColor}" id="card-image-${model.replace(/\s+/g, '-')}">
              </div>
              <div class="card-details">
                <h2>${selectedSize}-inch BoibyBook Pro - ${model}</h2>
                <p class="price">From ${formatPrice(cfg.price)}</p>
                <ul>
                  <li>${cfg.display}</li>
                  <li>${cleanLabel(cfg.upgrades.chip[0])}</li>
                  <li>${cleanLabel(cfg.upgrades.memory[0])}</li>
                  <li>${cleanLabel(cfg.upgrades.storage[0])}</li>
                  <li>${cleanLabel(cfg.upgrades.adapter[0])}</li>
                </ul>
                <p><strong>Ports:</strong></p>
                <ul>
                  ${cfg.ports.map(port => `<li>${port}</li>`).join('')}
                </ul>
              </div>
            </div>
            <div class="color-selector">
              ${colors.map(color => `
                <div class="color-pill ${color === selectedColor ? 'selected' : ''}" 
                     data-color="${color}" data-model="${model}">
                  ${color}
                </div>
              `).join('')}
            </div>
            <button class="select-btn" data-model="${model}">Select</button>
          `;
          
          // Add color selection event
          card.querySelectorAll('.color-pill').forEach(pill => {
            pill.addEventListener('click', (e) => {
              e.stopPropagation();
              const color = pill.getAttribute('data-color');
              const model = pill.getAttribute('data-model');
              
              // Update all color pills for this model
              card.querySelectorAll('.color-pill').forEach(p => {
                p.classList.toggle('selected', p.getAttribute('data-color') === color);
              });
              
              // Update image with fade effect
              const image = card.querySelector('img');
              image.style.opacity = 0;
              
              setTimeout(() => {
                image.src = `BoibyBookPro${color}.png`;
                image.style.opacity = 1;
              }, 150);
            });
          });
          
          // Add select button event
          card.querySelector('.select-btn').addEventListener('click', (e) => {
            e.stopPropagation();
            const model = e.target.getAttribute('data-model');
            selectedModel = model;
            
            // Get selected color for this model
            const selectedColorPill = card.querySelector('.color-pill.selected');
            selectedColor = selectedColorPill ? selectedColorPill.getAttribute('data-color') : 'Black';
            
            const modelsEl = $('#models');
            if (modelsEl) modelsEl.style.display = 'none';
            $('#configurator').style.display = 'block';
            // Hide size tabs when a model is selected
            $('#sizeTabs').style.display = 'none';
            showConfigurator();
          });
          
          container.appendChild(card);
        });
      }

      function showConfigurator() {
        const cfg = baseConfigs[selectedSize][selectedModel];
        const optionsDiv = $('#options');
        optionsDiv.innerHTML = '';
        selectedOptions = {};

        $('#heroTitle').innerText = `Customise your BoibyBook Pro — ${selectedModel} ${selectedSize}"`;
        
        // Update hero image
        const heroImage = $('#heroImage');
        heroImage.innerHTML = `<img src="BoibyBookPro${selectedColor}.png" alt="${selectedModel} ${selectedColor}">`;

        // upgrades
        Object.keys(cfg.upgrades).forEach(category => {
          const group = document.createElement('div');
          group.className = 'group';
          const h3 = document.createElement('h3');
          
          // Add info icon for memory category
          if (category === 'memory') {
            h3.innerHTML = `Memory <span class="info-icon" data-category="memory">?</span>`;
          } else {
            h3.innerText = category.charAt(0).toUpperCase() + category.slice(1);
          }
          
          group.appendChild(h3);

          cfg.upgrades[category].forEach((opt, idx) => {
            const pill = document.createElement('div');
            pill.className = 'pill';
            pill.dataset.cat = category;
            pill.dataset.value = opt; // IMPORTANT: canonical full string
            pill.innerHTML = `<span class="label">${cleanLabel(opt)}</span><span class="price-right">${priceDelta(opt) ? ('+A$' + priceDelta(opt)) : ''}</span>`;

            pill.addEventListener('click', () => {
              if (pill.classList.contains('disabled')) return;
              if (category === 'addons') {
                pill.classList.toggle('selected');
                if (!selectedOptions.addons) selectedOptions.addons = [];
                const full = pill.dataset.value;
                if (pill.classList.contains('selected')) selectedOptions.addons.push(full);
                else selectedOptions.addons = selectedOptions.addons.filter(a => a !== full);
              } else {
                // single-select logic
                Array.from(group.querySelectorAll('.pill')).forEach(s => s.classList.remove('selected'));
                pill.classList.add('selected');
                selectedOptions[category] = pill.dataset.value;
                if (category === 'chip') handleDependencies(); // re-evaluate when chip changes
              }
              renderHeroSummary();
              updatePrice();
            });

            // Default selection logic
            if (idx === 0) {
              pill.classList.add('selected');
              selectedOptions[category] = pill.dataset.value;
            }

            group.appendChild(pill);
          });

          if (category === 'memory') {
            const note = document.createElement('div');
            note.className = 'note';
            note.innerText = 'Select B5 Max for 96 GB unified memory. Select B5 Max with 18-core CPU and 48-core GPU for 96 GB or 128 GB unified memory.';
            group.appendChild(note);
            
            // Add event listener to the info icon
            const infoIcon = h3.querySelector('.info-icon');
            if (infoIcon) {
              infoIcon.addEventListener('click', () => showMemoryModal(selectedModel));
            }
          }

          optionsDiv.appendChild(group);
        });

        // add-ons group
        const addonsGroup = document.createElement('div');
        addonsGroup.className = 'group';
        const addonsTitle = document.createElement('h3');
        addonsTitle.innerText = 'Add-ons';
        addonsGroup.appendChild(addonsTitle);
        Object.keys(addons).forEach(sub => {
          const subTitle = document.createElement('div');
          subTitle.style.fontWeight = '600';
          subTitle.style.marginTop = '8px';
          subTitle.innerText = sub.charAt(0).toUpperCase() + sub.slice(1);
          addonsGroup.appendChild(subTitle);
          addons[sub].forEach(opt => {
            const pill = document.createElement('div');
            pill.className = 'pill';
            pill.dataset.cat = 'addons';
            pill.dataset.value = opt;
            pill.innerHTML = `<span class="label">${cleanLabel(opt)}</span><span class="price-right">${priceDelta(opt) ? ('+A$' + priceDelta(opt)) : ''}</span>`;
            pill.addEventListener('click', () => {
              pill.classList.toggle('selected');
              if (!selectedOptions.addons) selectedOptions.addons = [];
              const full = pill.dataset.value;
              if (pill.classList.contains('selected')) selectedOptions.addons.push(full);
              else selectedOptions.addons = selectedOptions.addons.filter(a => a !== full);
              renderHeroSummary();
              updatePrice();
            });
            addonsGroup.appendChild(pill);
          });
        });
        optionsDiv.appendChild(addonsGroup);

        // apply dependency logic (this will enable/disable and keep selections consistent)
        handleDependencies();
        renderHeroSummary();
        updatePrice();
      }

      function handleDependencies() {
        if (!selectedModel) return;

        const cfg = baseConfigs[selectedSize][selectedModel];
        const optionsDiv = $('#options');
        if (!optionsDiv) return;

        const chipFull = selectedOptions.chip || cfg.upgrades.chip[0];
        
        // Select all memory pills directly using data-cat="memory"
        const memoryPills = Array.from(document.querySelectorAll('.pill[data-cat="memory"]'));
        if (!memoryPills.length) {
            console.warn('No memory pills found');
            return;
        }

        // Helper to get clean text for a pill
        const getPillText = (pill) => {
            const label = pill.querySelector('.label');
            return (label ? label.textContent : pill.textContent).trim();
        }

        // Helper to find a pill by text
        const findPill = (text) => memoryPills.find(p => getPillText(p).includes(text));

        // Remove all disabled classes first
        memoryPills.forEach(p => p.classList.remove('disabled'));

        if (selectedModel === 'B6 Pro/Max') {
            const mem32 = findPill('32 GB');
            const mem48 = findPill('48 GB');
            const mem64 = findPill('64 GB');
            const mem96 = findPill('96 GB');
            const mem128 = findPill('128 GB');

            if (chipFull.includes('B6 Pro')) {
                // Enable 32GB, 48GB, 64GB
                if (mem32) mem32.classList.remove('disabled');
                if (mem48) mem48.classList.remove('disabled');
                if (mem64) mem64.classList.remove('disabled');
                // Disable 96GB and 128GB
                if (mem96) mem96.classList.add('disabled');
                if (mem128) mem128.classList.add('disabled');
            }
            else if (chipFull.includes('14-core CPU') && chipFull.includes('40-core GPU')) {
                // Enable 96GB
                if (mem48) mem48.classList.remove('disabled');
                if (mem96) mem96.classList.remove('disabled');
                // Disable 32GB, 64GB and 128GB
                if (mem32) mem32.classList.add('disabled');
                if (mem64) mem64.classList.add('disabled');
                if (mem128) mem128.classList.add('disabled');
            }
            else if (chipFull.includes('18-core CPU') && chipFull.includes('48-core GPU')) {
                // Enable 64GB, 96GB, and 128GB
                if (mem64) mem64.classList.remove('disabled');
                if (mem96) mem96.classList.remove('disabled');
                if (mem128) mem128.classList.remove('disabled');
                // Disable 32GB and 48GB
                if (mem32) mem32.classList.add('disabled');
                if (mem48) mem48.classList.add('disabled');
            }

            if (selectedOptions.memory) {
                const currentMemoryPill = memoryPills.find(p => 
                    p.dataset.value === selectedOptions.memory
                );
                
                if (currentMemoryPill && currentMemoryPill.classList.contains('disabled')) {
                    memoryPills.forEach(p => p.classList.remove('selected'));
                    const firstAvailable = memoryPills.find(p => !p.classList.contains('disabled'));
                    if (firstAvailable) {
                        firstAvailable.classList.add('selected');
                        selectedOptions.memory = cfg.upgrades.memory.find(m => 
                            m.includes(getPillText(firstAvailable))
                        );
                        console.log('Memory auto-selected:', selectedOptions.memory);
                    }
                }
            }
        }

        renderHeroSummary();
        updatePrice();
      }

      function showMemoryModal(model) {
        const modal = $('#memoryModal');
        const title = $('#memoryModalTitle');
        const content = $('#memoryModalContent');
        
        // Set title and content based on model
        title.textContent = `${model} Memory Guide`;
        content.innerHTML = memoryGuides[model] || memoryGuides['B6'];
        
        modal.classList.add('visible');
        
        // Add event listener to close button
        const closeButton = modal.querySelector('.modal-close');
        closeButton.addEventListener('click', hideMemoryModal);
        
        // Close modal when clicking outside
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            hideMemoryModal();
          }
        });
        
        // Close modal with Escape key
        document.addEventListener('keydown', function escHandler(e) {
          if (e.key === 'Escape') {
            hideMemoryModal();
            document.removeEventListener('keydown', escHandler);
          }
        });
      }
      
      function showChipModal() {
        const modal = $('#chipModal');
        modal.classList.add('visible');
        
        // Add event listener to close button
        const closeButton = modal.querySelector('.modal-close');
        closeButton.addEventListener('click', hideChipModal);
        
        // Close modal when clicking outside
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            hideChipModal();
          }
        });
        
        document.addEventListener('keydown', function escHandler(e) {
          if (e.key === 'Escape') {
            hideChipModal();
            document.removeEventListener('keydown', escHandler);
          }
        });
      }
      
      function hideMemoryModal() {
        const modal = $('#memoryModal');
        modal.classList.remove('visible');
      }
      
      function hideChipModal() {
        const modal = $('#chipModal');
        modal.classList.remove('visible');
      }

      function renderHeroSummary() {
        const list = $('#heroList');
        if (!list) return;
        list.innerHTML = '';
        const cfg = baseConfigs[selectedSize][selectedModel];
        list.appendChild(li(`${selectedModel} ${selectedSize}" — ${cfg.display}`));
        list.appendChild(li(`Color: ${selectedColor}`));
        
        // Add ports information
        list.appendChild(li("Ports:"));
        cfg.ports.forEach(port => {
          list.appendChild(li(`• ${port}`));
        });
        
        const order = ['chip','memory','storage','adapter','coating'];
        order.forEach(cat => {
          if (selectedOptions[cat]) list.appendChild(li(cleanLabel(selectedOptions[cat])));
        });
        if (selectedOptions.addons && selectedOptions.addons.length) {
          selectedOptions.addons.forEach(a => list.appendChild(li(cleanLabel(a))));
        }
      }

      function updatePrice() {
        const cfg = baseConfigs[selectedSize][selectedModel];
        let price = cfg.price;
        Object.keys(selectedOptions).forEach(cat => {
          if (cat === 'addons') {
            selectedOptions.addons.forEach(a => price += priceDelta(a));
          } else {
            price += priceDelta(selectedOptions[cat]);
          }
        });
        $('#finalPrice').innerText = `Total: ${formatPrice(price)}`;
      }

      function showConfirmation() {
        const cfg = baseConfigs[selectedSize][selectedModel];
        let price = cfg.price;
        
        // Hide configurator and checkout, show confirmation
        $('#configurator').style.display = 'none';
        $('#checkout').style.display = 'none';
        $('#confirmation').style.display = 'block';
        
        // Set confirmation image
        $('#confirmationImage').innerHTML = `<img src="BoibyBookPro${selectedColor}.png" alt="${selectedModel} ${selectedColor}">`;
        
        // Set confirmation model text
        $('#confirmationModel').textContent = `${selectedModel} ${selectedSize}" - ${selectedColor}`;
        
        // Build confirmation list
        const list = $('#confirmationList');
        list.innerHTML = '';
        
        list.appendChild(li(`Model: ${selectedModel} ${selectedSize}"`));
        list.appendChild(li(`Color: ${selectedColor}`));
        list.appendChild(li(cleanLabel(selectedOptions.chip || cfg.upgrades.chip[0])));
        list.appendChild(li(cleanLabel(selectedOptions.memory || cfg.upgrades.memory[0])));
        list.appendChild(li(cleanLabel(selectedOptions.storage || cfg.upgrades.storage[0])));
        list.appendChild(li(cleanLabel(selectedOptions.adapter || cfg.upgrades.adapter[0])));
        
        if (selectedOptions.coating) {
          list.appendChild(li(cleanLabel(selectedOptions.coating)));
        }
        
        if (selectedOptions.addons && selectedOptions.addons.length) {
          selectedOptions.addons.forEach(a => list.appendChild(li(cleanLabel(a))));
        }
        
        // Calculate final price
        Object.keys(selectedOptions).forEach(cat => {
          if (cat === 'addons') {
            selectedOptions.addons.forEach(a => price += priceDelta(a));
          } else {
            price += priceDelta(selectedOptions[cat]);
          }
        });
        
        $('#confirmationTotal').textContent = `Total: ${formatPrice(price)}`;
      }

      function li(text) { 
        const el = document.createElement('li'); 
        el.textContent = text; 
        return el; 
      }

      const backBtn = $('#backBtn');
      if (backBtn) backBtn.addEventListener('click', () => {
        $('#configurator').style.display = 'none';
        $('#models').style.display = 'grid';
        // Show size tabs again when going back
        $('#sizeTabs').style.display = 'flex';
      });

      const confirmationBackBtn = $('#confirmationBackBtn');
      if (confirmationBackBtn) confirmationBackBtn.addEventListener('click', () => {
        $('#confirmation').style.display = 'none';
        $('#models').style.display = 'grid';
        $('#checkout').style.display = 'flex';
        // Show size tabs again when going back
        $('#sizeTabs').style.display = 'flex';
      });

      const addToBagBtn = $('#addToBagBtn');
      if (addToBagBtn) addToBagBtn.addEventListener('click', showConfirmation);
      
      const chipInfoLink = $('#chipInfoLink');
      if (chipInfoLink) chipInfoLink.addEventListener('click', showChipModal);

      document.addEventListener('DOMContentLoaded', () => {
        initTabs();
        renderModels();
        const tabs = $$('.tab[data-size]');
        if (tabs.length) tabs.forEach(t => t.classList.toggle('active', t.getAttribute('data-size') === selectedSize));
      });

      window.__boiby_reloadModels = renderModels;
    })();
  </script>
</body>
</html>
