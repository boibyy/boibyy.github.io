<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Boiby Studio - Purchase</title>
  <style>
    :root{
  --blue:#0071e3;
  --border:#d2d2d7;
  --text:#1d1d1f;
  --muted:#6e6e73;
  --bg:#fff;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Header */
header{ text-align:center; padding:28px 16px; border-bottom:1px solid var(--border); }
h1{ font-size:1.9rem; margin:0; font-weight:700; }

/* Models (list of cards) */
.models{
  display:flex;
  flex-direction:column;
  gap:18px;
  padding:20px;
  max-width:720px;
  margin:18px auto;
}
.card{
  border:1px solid var(--border);
  border-radius:14px;
  padding:18px;
  background:#fff;
  cursor:pointer;
  transition:box-shadow .12s,transform .08s,border-color .12s;
}
    /* --- Confirmation Screen --- */
.confirmation {
  display: none;
  text-align: center;
  padding: 40px 20px;
  animation: fadeIn 0.5s ease-in-out;
}

.confirmation-image img {
  max-width: 250px;
  margin-bottom: 20px;
}

.confirmation-title {
  font-size: 1.8em;
  font-weight: bold;
  margin-bottom: 10px;
}

.confirmation-model {
  font-size: 1.2em;
  margin-bottom: 20px;
  color: #555;
}

.confirmation-details {
  text-align: left;
  max-width: 400px;
  margin: 0 auto;
  background: #f7f7f8;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.confirmation-list {
  list-style: none;
  padding: 0;
  margin: 0 0 15px 0;
}

.confirmation-list li {
  margin-bottom: 8px;
  padding-left: 12px;
  border-left: 3px solid #0071e3;
}

.confirmation-total {
  font-size: 1.4em;
  font-weight: bold;
  text-align: right;
}

/* Fade-in animation */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}
.card:hover{ border-color:var(--blue); transform:translateY(-2px); }
.card h2{ margin:0 0 8px; font-size:1.25rem; font-weight:600; }
.price{ color:var(--muted); margin:6px 0 12px; font-weight:500; }
.card ul{ margin:0; padding-left:20px; color:var(--muted); }

/* Configurator container */
.configurator{ max-width:920px; margin:18px auto; padding:18px; }

/* Back button */
.back-btn{
  margin-bottom:16px;
  padding:8px 16px;
  border-radius:999px;
  border:none;
  background:#f5f5f7;
  cursor:pointer;
}
.back-btn:hover{ background:#e8e8eb; }

/* Hero */
.hero{ margin-bottom:18px; }
.hero-title{ font-size:clamp(1.6rem,4vw,2.4rem); margin:0 0 8px; font-weight:700; }
.hero-list{ list-style:none; padding:0; margin:0; color:var(--muted); }
.hero-list li{ margin:6px 0; font-size:1rem; line-height:1.6; }

/* Groups */
.group{ margin:20px 0; }
.group h3{ margin:0 0 10px; font-size:1.05rem; }

/* Pills (options) */
.pill{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:28px 20px;
  border:1px solid var(--border);
  border-radius:12px;
  margin:8px 0;
  background:#fff;
  cursor:pointer;
  transition:box-shadow .12s,border-color .12s,transform .06s;
  font-size:1.02rem;
}
.pill:hover{ border-color:var(--blue); transform:translateY(-2px); }
.pill.selected{ border:2px solid var(--blue); box-shadow:0 4px 14px rgba(0,113,227,0.08); }
.pill.disabled{ opacity:.6; cursor:not-allowed; background:#fbfbfb; }
.pill .label{ font-weight:600; }
.pill .price-right{ color:var(--muted); font-weight:600; white-space:nowrap; }

/* Notes */
.note{ color:var(--muted); font-size:.92rem; margin-top:6px; }

/* Checkout */
.checkout{
  position:sticky;
  bottom:0;
  left:0;
  width:100%;
  background:linear-gradient(#fff,#fff);
  border-top:1px solid var(--border);
  padding:18px;
  display:flex;
  gap:12px;
  align-items:center;
  justify-content:space-between;
  z-index:40;
  box-shadow:0 -4px 10px rgba(0,0,0,0.04);
}
.total{ font-size:1.4rem; font-weight:700; }
.add-to-bag{
  background:var(--blue);
  color:#fff;
  border:none;
  padding:12px 22px;
  border-radius:999px;
  font-size:1.05rem;
  cursor:pointer;
}
.add-to-bag:hover{ background:#005bb5; }

/* Small screens */
@media (max-width:600px){
  .pill{ padding:14px; }
  .models{ padding:12px; }
  .configurator{ padding:12px; }
  .checkout{ flex-direction:column; align-items:stretch; text-align:center; }
  .add-to-bag{ width:100%; }
}
  </style>
</head>
<body>
  <header>
    <h1>Buy Boiby Studio</h1>
  </header>

  <div class="models" id="models">
    <div class="card" data-model="B5 Max">
      <h2>Boiby Studio - B5 Max</h2>
      <p class="price">From A$3199</p>
      <ul>
        <li>Boiby B5 Max with 14-core CPU and 38-core GPU</li>
        <li>48 GB unified memory</li>
        <li>1 TB SSD storage</li>
        <li>10 Gbit Ethernet</li>
      </ul>
    </div>

    <div class="card" data-model="B5 Ultra">
      <h2>Boiby Studio - B5 Ultra</h2>
      <p class="price">From A$6399</p>
      <ul>
        <li>Boiby B5 Ultra with 28-core CPU and 76-core GPU</li>
        <li>96 GB unified memory</li>
        <li>2 TB SSD storage</li>
        <li>10 Gbit Ethernet</li>
      </ul>
    </div>
  </div>

  <div class="configurator" id="configurator" style="display:none;">
    <button class="back-btn" id="backBtn">← Back</button>

    <div class="hero">
      <h2 class="hero-title" id="heroTitle"></h2>
      <ul class="hero-list" id="heroList"></ul>
    </div>

    <div id="options"></div>

    <div class="checkout">
      <div class="total" id="finalPrice"></div>
      <button class="add-to-bag">Add to Bag</button>
    </div>
  </div>

  <div class="confirmation" id="confirmation" style="display:none;">
    <div class="confirmation-image">
      <img src="studio-placeholder.png" alt="Boiby Studio">
    </div>
    <h2 class="confirmation-title">Order Placed!</h2>
    <p class="confirmation-model" id="confirmationModel"></p>
    <div class="confirmation-details">
      <ul class="confirmation-list" id="confirmationList"></ul>
      <p class="confirmation-total" id="confirmationTotal"></p>
    </div>
  </div>


<script>
const baseConfigs = {
  "B5 Max": {
    price: 3199,
    name: "Boiby Studio - B5 Max",
    upgrades: {
      chip: [
        "Boiby B5 Max with 14-core CPU and 38-core GPU (base)", 
        "Boiby B5 Max with 18-core CPU and 48-core GPU (+A$800)"
      ],
      memory: [
        "48 GB unified memory (base)",
        "64 GB unified memory (+A$200)",
        "96 GB unified memory (+A$400)",
        "128 GB unified memory (+A$700)"
      ],
      storage: [
        "1 TB SSD storage (base)", 
        "2 TB SSD storage (+A$100)", 
        "4 TB SSD storage (+A$300)", 
        "8 TB SSD storage (+A$700)"
      ],
      ethernet: [
        "10 Gbit Ethernet (base)"
      ]
    }
  },
  "B5 Ultra": {
    price: 6399,
    name: "Boiby Studio - B5 Ultra",
    upgrades: {
      chip: [
        "Boiby B5 Ultra with 28-core CPU and 76-core GPU (base)", 
        "Boiby B5 Ultra with 36-core CPU and 96-core GPU (+A$1600)"
      ],
      memory: [
        "96 GB unified memory (base)",
        "128 GB unified memory (+A$300)",
        "256 GB unified memory (+A$1500)",
        "384 GB unified memory (+A$2700)",
      ],
      storage: [
        "2 TB SSD storage (base)", 
        "4 TB SSD storage (+A$200)", 
        "8 TB SSD storage (+A$600)", 
        "16 TB SSD storage (+A$1400)"
      ],
      ethernet: [
        "10 Gbit Ethernet (base)", 
      ]
    }
  }
};

const addons = {
  mouse: ["Boiby Pro Mouse (+A$50)"],
  keyboard: ["Boiby Pro Keyboard (+A$150)", "Boiby Pro Keyboard with Number Pad (+A$200)"],
  monitor: ["Boiby HDR Display 27-inch (IPS 1440p 240Hz) (+A$499)", "Boiby Studio Display OLED 27-inch (1440p 360Hz) (+A$1199)"]
};

let selectedModel = null;
let selectedOptions = {};

const cleanLabel = opt => opt.split("(")[0].trim();
const rightPrice = opt => {
  const m = opt.match(/\+A\$\d+/);
  return m ? m[0].replace('+','+ ') : '';
};

document.querySelectorAll(".card").forEach(card => {
  card.addEventListener("click", () => {
    selectedModel = card.getAttribute("data-model");
    document.getElementById("models").style.display = "none";
    showConfigurator();
  });
});

document.getElementById("backBtn").addEventListener("click", () => {
  document.getElementById("configurator").style.display = "none";
  document.getElementById("models").style.display = "flex";
});

function showConfigurator() {
  const config = baseConfigs[selectedModel];
  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";
  selectedOptions = {};
  document.getElementById("heroTitle").innerText = `Customise your Boiby Studio — ${selectedModel}`;

  // Render upgrade groups
  for (let category in config.upgrades) {
    const group = document.createElement("div");
    group.className = "group";
    const h3 = document.createElement("h3");
    h3.innerText = category.charAt(0).toUpperCase() + category.slice(1);
    group.appendChild(h3);

    config.upgrades[category].forEach((opt, idx) => {
      const pill = document.createElement("div");
      pill.className = "pill";
      pill.innerHTML = `<span class="label">${cleanLabel(opt)}</span><span class="price-right">${rightPrice(opt)}</span>`;

      // Handle dependencies
      if (selectedModel === "B5 Max") {
        // 128GB memory only available with 18-core CPU
        if (category === "memory" && opt.includes("128 GB")) {
          pill.classList.add("disabled");
        }
      } else if (selectedModel === "B5 Ultra") {
        // 512GB memory only available with 36-core CPU
        if (category === "memory" && opt.includes("384 GB")) {
          pill.classList.add("disabled");
        }
        // 16TB storage only available with 32-core CPU
        if (category === "storage" && opt.includes("16 TB")) {
          pill.classList.add("disabled");
        }
      }

      pill.addEventListener("click", () => {
        if (pill.classList.contains("disabled")) return;

        group.querySelectorAll(".pill").forEach(p => p.classList.remove("selected"));
        pill.classList.add("selected");
        selectedOptions[category] = opt;

        // Handle dependencies when chip is selected
        if (selectedModel === "B5 Max" && category === "chip") {
          const memoryGroup = Array.from(optionsDiv.querySelectorAll(".group"))
            .find(g => g.querySelector("h3").innerText.toLowerCase() === "memory");
          
          // Enable/disable memory options based on chip selection
          if (memoryGroup) {
            const memory128 = Array.from(memoryGroup.querySelectorAll(".pill"))
              .find(p => p.textContent.includes("128 GB"));
            
            if (opt.includes("18-core")) {
              if (memory128) memory128.classList.remove("disabled");
            } else {
              if (memory128) memory128.classList.add("disabled");
              
              // If current selection is now disabled, select the first available option
              if (selectedOptions.memory && 
                  selectedOptions.memory.includes("128 GB")) {
                memoryGroup.querySelectorAll(".pill").forEach(p => p.classList.remove("selected"));
                const firstAvailable = memoryGroup.querySelector(".pill:not(.disabled)");
                if (firstAvailable) {
                  firstAvailable.classList.add("selected");
                  selectedOptions.memory = config.upgrades.memory.find(m => 
                    m.includes(firstAvailable.querySelector(".label").textContent)
                  );
                }
              }
            }
          }
        } else if (selectedModel === "B5 Ultra" && category === "chip") {
          const memoryGroup = Array.from(optionsDiv.querySelectorAll(".group"))
            .find(g => g.querySelector("h3").innerText.toLowerCase() === "memory");
          const storageGroup = Array.from(optionsDiv.querySelectorAll(".group"))
            .find(g => g.querySelector("h3").innerText.toLowerCase() === "storage");
          
          // Enable/disable memory options based on chip selection
          if (memoryGroup) {
            const memory384 = Array.from(memoryGroup.querySelectorAll(".pill"))
              .find(p => p.textContent.includes("384 GB"));
            
            if (opt.includes("36-core")) {
              if (memory384) memory384.classList.remove("disabled");
            } else {
              if (memory384) memory384.classList.add("disabled");
              
              // If current selection is now disabled, select the first available option
              if (selectedOptions.memory && 
                selectedOptions.memory.includes("384 GB")) {
                memoryGroup.querySelectorAll(".pill").forEach(p => p.classList.remove("selected"));
                const firstAvailable = memoryGroup.querySelector(".pill:not(.disabled)");
                if (firstAvailable) {
                  firstAvailable.classList.add("selected");
                  selectedOptions.memory = config.upgrades.memory.find(m => 
                    m.includes(firstAvailable.querySelector(".label").textContent)
                  );
                }
              }
            }
          }
          
          // Enable/disable storage options based on chip selection
          if (storageGroup) {
            const storage16TB = Array.from(storageGroup.querySelectorAll(".pill"))
              .find(p => p.textContent.includes("16 TB"));
            
            if (opt.includes("36-core")) {
              if (storage16TB) storage16TB.classList.remove("disabled");
            } else {
              if (storage16TB) storage16TB.classList.add("disabled");
              
              // If current selection is now disabled, select the first available option
              if (selectedOptions.storage && selectedOptions.storage.includes("16 TB")) {
                storageGroup.querySelectorAll(".pill").forEach(p => p.classList.remove("selected"));
                const firstAvailable = storageGroup.querySelector(".pill:not(.disabled)");
                if (firstAvailable) {
                  firstAvailable.classList.add("selected");
                  selectedOptions.storage = config.upgrades.storage.find(s => 
                    s.includes(firstAvailable.querySelector(".label").textContent)
                  );
                }
              }
            }
          }
        }

        renderHeroSummary();
        updatePrice();
      });

      // Select first option by default, except disabled options
      if (idx === 0 && !pill.classList.contains("disabled")) {
        pill.classList.add("selected");
        selectedOptions[category] = opt;
      }

      group.appendChild(pill);
    });

    // Add notes for dependencies
    if (selectedModel === "B5 Max" && category === "memory") {
      const note = document.createElement("div");
      note.className = "note";
      note.innerText = "128 GB unified memory available on B5 Max with 18-core CPU and 48-core GPU.";
      group.appendChild(note);
    } else if (selectedModel === "B5 Ultra" && category === "memory") {
      const note = document.createElement("div");
      note.className = "note";
      note.innerText = "384 GB unified memory available on B5 Ultra with 36-core CPU and 96-core GPU.";
      group.appendChild(note);
    } else if (selectedModel === "B5 Ultra" && category === "storage") {
      const note = document.createElement("div");
      note.className = "note";
      note.innerText = "16 TB SSD storage available on B5 Ultra with 36-core CPU and 96-core GPU.";
      group.appendChild(note);
    }

    optionsDiv.appendChild(group);
  }

  // Add-ons
  const addonsGroup = document.createElement("div");
  addonsGroup.className = "group";
  const addonsTitle = document.createElement("h3");
  addonsTitle.innerText = "Add-ons";
  addonsGroup.appendChild(addonsTitle);

  for (let sub in addons) {
    const subTitle = document.createElement("h4");
    subTitle.innerText = sub.charAt(0).toUpperCase() + sub.slice(1);
    addonsGroup.appendChild(subTitle);

    addons[sub].forEach(opt => {
      const pill = document.createElement("div");
      pill.className = "pill";
      pill.innerHTML = `<span class="label">${cleanLabel(opt)}</span><span class="price-right">${rightPrice(opt)}</span>`;
      pill.addEventListener("click", () => {
        pill.classList.toggle("selected");
        if (!selectedOptions.addons) selectedOptions.addons = [];
        if (pill.classList.contains("selected")) {
          selectedOptions.addons.push(opt);
        } else {
          selectedOptions.addons = selectedOptions.addons.filter(a => a !== opt);
        }
        renderHeroSummary();
        updatePrice();
      });
      addonsGroup.appendChild(pill);
    });
  }

  optionsDiv.appendChild(addonsGroup);
  document.getElementById("configurator").style.display = "block";

  renderHeroSummary();
  updatePrice();
}

function renderHeroSummary() {
  const list = document.getElementById("heroList");
  list.innerHTML = "";

  if (selectedModel === "B5 Max") {
    list.appendChild(li(cleanLabel(selectedOptions.chip || 'Boiby B5 Max with 14-core CPU and 38-core GPU')));
    list.appendChild(li(cleanLabel(selectedOptions.memory || '48 GB unified memory')));
    list.appendChild(li(cleanLabel(selectedOptions.storage || '1 TB SSD storage')));
    list.appendChild(li(cleanLabel(selectedOptions.ethernet || '10 Gbit Ethernet')));
  } else if (selectedModel === "B5 Ultra") {
    list.appendChild(li(cleanLabel(selectedOptions.chip || 'Boiby B5 Ultra with 28-core CPU and 76-core GPU')));
    list.appendChild(li(cleanLabel(selectedOptions.memory || '96 GB unified memory')));
    list.appendChild(li(cleanLabel(selectedOptions.storage || '2 TB SSD storage')));
    list.appendChild(li(cleanLabel(selectedOptions.ethernet || '10 Gbit Ethernet')));
  }

  if (selectedOptions.addons && selectedOptions.addons.length > 0) {
    selectedOptions.addons.forEach(addon => {
      list.appendChild(li(cleanLabel(addon)));
    });
  }
}

function updatePrice() {
  let price = baseConfigs[selectedModel].price;

  for (let category in selectedOptions) {
    const val = selectedOptions[category];
    if (Array.isArray(val)) {
      val.forEach(opt => {
        const match = opt.match(/\+A\$(\d+)/);
        if (match) price += parseInt(match[1], 10);
      });
    } else {
      const match = val.match(/\+A\$(\d+)/);
      if (match) price += parseInt(match[1], 10);
    }
  }

  document.getElementById("finalPrice").innerText = `Total: A$${price}`;
  
}

function li(text) {
  const el = document.createElement('li');
  el.textContent = text;
  return el;
}
  
document.querySelector(".add-to-bag").addEventListener("click", () => {
  // Hide configurator
  document.getElementById("configurator").style.display = "none";
  // Show confirmation
  document.getElementById("confirmation").style.display = "block";

  // Set model name
  document.getElementById("confirmationModel").innerText = selectedModel;

  // Build confirmation list
  const list = document.getElementById("confirmationList");
  list.innerHTML = "";
  for (let category in selectedOptions) {
    if (Array.isArray(selectedOptions[category])) {
      selectedOptions[category].forEach(opt => {
        list.appendChild(li(cleanLabel(opt)));
      });
    } else {
      list.appendChild(li(cleanLabel(selectedOptions[category])));
    }
  }

  // Show total price
  document.getElementById("confirmationTotal").innerText =
    document.getElementById("finalPrice").innerText;
});

</script>
</body>
</html>
