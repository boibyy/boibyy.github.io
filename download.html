<!-- download.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Download — Boiby App</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="bouncy.css">
  <script defer src="download-page.js"></script>
</head>
<body class="dark">
  <header>
    <img src="boiby.png" class="favicon" alt="Boiby">
    <a href="#" class="hamburger">☰</a>
    <nav>
      <a href="/index" class="link">Home</a>
      <a href="/about" class="link">About</a>
      <a href="/projects" class="link">Projects</a>
      <a href="/extras" class="link">Extras</a>
      <a href="/contact" class="link">Contact</a>
    </nav>
    <button id="theme-toggle" class="secondary" onclick="toggleTheme()">Switch to Light Mode</button>
    <button id="motion-toggle" class="secondary" onclick="toggleMotion()">Reduce Motion</button>
  </header>

  <main>
    <section class="wrap heading">
      <h1 class="text-center header-margin-home">Download Boiby</h1>

      <div class="cards-container">
        <div class="card full-width">
          <h2 id="download-heading">Download for your operating system</h2>
          <p id="download-sub" class="small">If your OS can't be detected, click the button below to view all downloads and requirements.</p>

          <div style="display:flex;gap:12px;align-items:center;margin-top:12px;">
            <a id="download-button" class="primary-blue" href="#">Download for your operating system</a>
            <button id="view-all" class="secondary" onclick="openDownloadsModal()">View all downloads</button>
          </div>

          <p style="margin-top:12px;">Current version: <strong>beta 3.0</strong></p>
          <p>Notes:</p>
          <ul>
            <li>6 meows included in this beta build.</li>
            <li>2 Boiby images available; more will be added.</li>
            <li>For best results, use a GPU that supports Vulkan rendering (required).</li>
          </ul>
        </div>

        <div class="card">
          <h2>Requirements</h2>
          <ul>
            <li>64‑bit CPU and OS</li>
            <li>Vulkan-capable GPU (required for rendering)</li>
            <li>~200 MB free storage space</li>
          </ul>
          <p class="small">If you cannot run Vulkan on your system, try updating GPU drivers or use a compatible OS / hardware.</p>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <hr>
    <p>© Boiby 2025</p>
  </footer>

  <!-- Downloads modal (shared) -->
  <div id="downloads-modal" class="modal" onclick="closeDownloadsModal()" style="display:none;">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="modal-header">
        <p class="modal-header-text">All downloads & requirements</p>
      </div>
      <div class="modal-body">
        <h3>Available builds</h3>
        <ul>
          <li>
            <strong>Windows</strong> — <small>Windows 10 and later (64-bit)</small><br>
            <a href="/downloads/boiby-windows-beta3.zip" class="primary-blue">Download: boiby-windows-beta3.zip</a>
          </li>
          <li>
            <strong>macOS</strong> — <small>macOS 11 Big Sur and later</small><br>
            <a href="/downloads/boiby-macos-beta3.zip" class="primary-blue">Download: boiby-macos-beta3.zip</a>
          </li>
          <li>
            <strong>Linux</strong> — <small>Modern 64-bit Linux</small><br>
            <a href="/downloads/boiby-linux-beta3.tar.xz" class="primary-blue">Download: boiby-linux-beta3.tar.xz</a>
          </li>
        </ul>

        <h3 style="margin-top:12px;">System requirements</h3>
        <ul>
          <li>64-bit OS (Windows/macOS/Linux)</li>
          <li>Vulkan-capable GPU (required)</li>
          <li>Up-to-date GPU drivers</li>
          <li>Internet connection for updates/feedback</li>
        </ul>

        <p class="small">If you're unsure whether your system supports Vulkan, check your GPU vendor's driver pages or use a Vulkan-capable system info tool.</p>
      </div>
      <div class="modal-footer">
        <button class="secondary" onclick="closeDownloadsModal()">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Minimal client-side OS detection and button wiring.
    (function(){
      function detectOS() {
        const ua = navigator.userAgent || navigator.vendor || window.opera || '';
        const platform = navigator.platform || '';

        // Windows
        if (/Windows NT/.test(ua) || /Win32/.test(platform) || /Win64/.test(platform)) return 'windows';

        // macOS (MacIntel covers Apple Silicon too when running as macOS)
        if (/Macintosh/.test(ua) || /MacIntel/.test(platform) || /MacPPC/.test(platform)) return 'macos';

        // Linux
        if (/Linux/.test(platform) || /X11/.test(ua) || /Linux/.test(ua)) return 'linux';

        return null;
      }

      function setDownloadFor(os) {
        const heading = document.getElementById('download-heading');
        const sub = document.getElementById('download-sub');
        const btn = document.getElementById('download-button');
        const viewAll = document.getElementById('view-all');

        if (!os) {
          heading.textContent = 'Download for your operating system';
          btn.textContent = 'Download for your operating system';
          btn.href = '#';
          viewAll.style.display = 'inline-block';
          return;
        }

        viewAll.style.display = 'inline-block';

        if (os === 'windows') {
          heading.textContent = 'Download for Windows';
          sub.textContent = 'Windows 10 and newer (64-bit)';
          btn.textContent = 'Download for Windows';
          btn.href = '/downloads/boiby-windows-beta3.zip';
        } else if (os === 'macos') {
          heading.textContent = 'Download for macOS';
          sub.textContent = 'macOS 11 Big Sur and newer';
          btn.textContent = 'Download for macOS';
          btn.href = '/downloads/boiby-macos-beta3.zip';
        } else if (os === 'linux') {
          heading.textContent = 'Download for Linux';
          sub.textContent = 'Modern 64-bit Linux';
          btn.textContent = 'Download for Linux';
          btn.href = '/downloads/boiby-linux.appimage';
        }
      }

      window.openDownloadsModal = function() {
        const modal = document.getElementById('downloads-modal');
        modal.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      };

      window.closeDownloadsModal = function() {
        const modal = document.getElementById('downloads-modal');
        modal.style.display = 'none';
        document.body.style.overflow = '';
      };

      // initialise on DOM ready
      document.addEventListener('DOMContentLoaded', function(){
        const os = detectOS();
        setDownloadFor(os);

        // close modal on Esc
        document.addEventListener('keydown', function(e){ if (e.key === 'Escape') closeDownloadsModal(); });
      });
    })();
  </script>
</body>
</html>
