<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Download — Boiby App</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="bouncy.css">

    <style>
        :root {
            --page-padding: 12px;
            --page-margin: 40px;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        body {
            width: 100%;
        }

        button {
            width: auto;
            display: block
        }

        .cards-container .card h1,
        .cards-container .card h2,
        .cards-container .card h3 {
            height: auto !important;
            visibility: visible !important;
        }

        .cards-container .card button {
            width: 100% !important;
            display: inline-flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        button>a {
            display: inline-block !important;
            width: 100% !important;
            height: 100% !important;
            color: inherit !important;
            text-decoration: none !important;
        }

        .modal {
            display: none;
        }

        .favicon {
            width: 36px !important;
        }

        .download-cta {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .download-meta {
            color: var(--secondary-text);
            font-size: 0.95rem;
        }

        .download-button {
            font-size: 18px;
            border-radius: 10px;
            font-weight: 550;
            padding: 12px 24px;
        }

        @media (max-width:800px) {
            main {
                padding-top: 80px;
            }
        }
    </style>

    <script src="modal.js"></script>
    <script src="nav.js"></script>
    <script src="theme.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            function detectOS() {
                const ua = navigator.userAgent || "", p = navigator.platform || "";
                if (/Win/.test(p) || /Windows NT/.test(ua)) return "windows";
                if (/Mac/.test(p)) return "macos";
                if (/Linux/.test(p) && !/Android/.test(ua)) return "linux";
                return null;
            }

            const os = detectOS();
            const heading = document.getElementById("download-heading");
            const sub = document.getElementById("download-sub");
            const btn = document.getElementById("download-button");
            const viewAll = document.getElementById("modal-button");

            if (!os) {
                if (heading) heading.textContent = "Download for your operating system";
                if (sub) sub.textContent = "If your OS can't be detected, click the button below to view all downloads and requirements.";
                if (btn) btn.onclick = () => openModal && openModal("downloads-modal");
                if (viewAll) viewAll.style.display = "inline-block";
                return;
            }

            if (viewAll) viewAll.style.display = "inline-block";

            let url;
            if (os === "windows") url = document.getElementById("dl-win")?.getAttribute("href");
            if (os === "macos") url = document.getElementById("dl-mac")?.getAttribute("href");
            if (os === "linux") url = document.getElementById("dl-linux")?.getAttribute("href");

            if (heading) heading.textContent = `Download for ${os === "macos" ? "macOS" : os === "windows" ? "Windows" : "Linux"}`;
            if (sub) sub.textContent = os === "windows" ? "Windows 10 and later (x86, 64-bit)" : os === "macos" ? "macOS 11 Big Sur and later" : "Modern 64-bit Linux";

            if (btn && url) btn.onclick = () => window.location.assign(url);
        });
    </script>
</head>

<body class="dark">
    <header>
        <img src="boiby.png" class="favicon" alt="Boiby">
        <a href="#" class="hamburger" aria-label="Open menu">☰</a>
        <nav aria-label="Main navigation">
            <a href="/index" class="link">Home</a>
            <a href="/about" class="link">About</a>
            <a href="/projects" class="link">Projects</a>
            <a href="/extras" class="link">Extras</a>
            <a href="/contact" class="link">Contact</a>
        </nav>

        <div style="margin-left:auto;display:flex;gap:8px;align-items:center;">
            <button id="theme-toggle" class="secondary" onclick="toggleTheme()">Switch to Light Mode</button>
        </div>
    </header>

    <main>
        <section class="heading">
            <div id="boiby-app-container" class="auto-margin db">
                <img class="boiby-app-image auto-margin db" src="boiby.png"
                    style="border-radius: 18px; max-width: 96px; width: 96px;">
            </div>
            <h1 class="text-center header-margin-home">Download Boiby</h1>
            <hr><br>

            <h2 id="download-heading">Download for your operating system</h2>
            <p id="download-sub" class="download-meta">If your OS can't be detected, click the button below to
                view all downloads and requirements.</p>

            <div class="download-cta" style="margin-top:12px;">
                <button id="download-button" class="primary-blue" href="#">Download for your operating system</button>
                <button id="modal-button" class="secondary" onclick="openModal()">View all
                    downloads</button>
            </div><br>

            <p style="margin-top:12px;">Current version: <strong>beta 3.0</strong></p>
            <p>Notes:</p>
            <ul>
                <li>6 meows included in this beta build.</li>
                <li>2 Boiby images available; more will be added.</li>
                <li><strong>GPU with Vulkan support is required</strong> for the app to run correctly.</li>
            </ul><br>

            <h2>Requirements</h2>
            <ul>
                <li>64-bit CPU and OS</li>
                <li>Dual-core CPU recommended (ie. Intel Core 2 Duo)</li>
                <li>512 MB of system RAM; 1 GB recommended</li>
                <li>Vulkan-capable GPU (required)</li>
                <li>~200 MB disk space</li>
            </ul>
            <p class="small">If you cannot run Vulkan, update your graphics drivers or try a different computer.</p>

            <h3 style="margin-top:12px;">Important for macOS users</h3>
            <ul>
                <li>Boiby App is designed to run on both Intel (x86) Macs and Apple Silicon (M1 chip and newer)
                    Macs.</li>
                <li><strong>You will need to allow the app through gatekeeper, as Apple blocks it as it's not a
                        signed application. You can do this through System Settings.</strong></li>
                <li>A Metal-capable GPU is required to run this app. This means most Mac models from 2012 and later that support macOS Catalina 10.15 natively. Mac Pro models from 2008-2012, and iMac models from late 2009 until 2011 can be upgraded with a Metal-capable GPU. Older Mac models that do not support macOS 11 Big Sur can be upgraded to it for free using the <a href="https://dortania.github.io/OpenCore-Legacy-Patcher/">OpenCore Legacy Patcher</a></li>
            </ul>
            </div>
        </section>
    </main>

    <footer>
        <hr>
        <p style="text-align:center;">© Boiby 2025</p>
    </footer>

    <!-- Downloads modal -->
    <div id="modal" class="modal downloads-modal" onclick="closeModal()" aria-hidden="true">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <p class="modal-header-text">All downloads & requirements</p>
            </div>
            <div class="modal-body">
                <h3>Available downloads</h3>
                <ul>
                    <p><strong>Windows</strong> - Windows 10 and later (x86, 64-bit)</p>
                        <button id="dl-win" href="/downloads/boiby-windows-beta3.exe" class="primary-blue">Download for
                            Windows</button><br>
                    <p><strong>macOS</strong> - macOS 11 Big Sur and later</p>
                        <button id="dl-mac" href="/downloads/boiby-macos-beta3.zip" class="primary-blue">Download for
                            macOS</button><br>
                    <p><strong>Linux</strong> - 64-bit Linux</p>
                        <button id="dl-linux" href="/downloads/boiby-linux-beta3.tar.xz" class="primary-blue">Download
                            for Linux</button><br>
                </ul>
            </div>
            <div class="modal-footer"><button class="secondary" onclick="closeModal()">Close</button></div>
        </div>
    </div>
</body>

</html>